!function(t,n){function e(t){return T.exec(t)?parseFloat(t)/100:t}function r(t){function n(){c.pointer=o(I,[!0,!0],a,r)}function e(){r=i(t),a=s(t),c.threshold=l(r)}var r,a,u={"mouseenter.parallax":function(){c.timer.add(n)},"mouseleave.parallax":function(t){c.timer.remove(n),c.pointer=o([t.pageX,t.pageY],[!0,!0],a,r)}},f={"resize.parallax":e},c={elem:t,events:u,winEvents:f,timer:new L};return q.on(f),t.on(u),e(),c}function a(t,n,e){var r=t.data(n);return r||(r=e?e(t):{},t.data(n,r)),r}function o(t,n,e,r){for(var a=[],o=2;o--;)a[o]=(t[o]-e[o])/r[o],a[o]=a[o]<0?0:a[o]>1?1:a[o];return a}function i(t){return[t.width(),t.height()]}function s(t){var n=t.offset()||{left:0,top:0},e="none"===t.css("borderLeftStyle")?0:parseInt(t.css("borderLeftWidth"),10),r="none"===t.css("borderTopStyle")?0:parseInt(t.css("borderTopWidth"),10);return[n.left+e+parseInt(t.css("paddingLeft"),10),n.top+r+parseInt(t.css("paddingTop"),10)]}function l(t){return[1/t[0],1/t[1]]}function u(t,n,e){return[n||t.outerWidth(),e||t.outerHeight()]}function f(t,r){for(var a=[t,r],o=2,i=[];o--;)i[o]="string"==typeof a[o]?a[o]===n?1:k[i[o]]||e(i[o]):a[o];return i}function c(t,n){return[F.test(t),F.test(n)]}function p(t,n,r){for(var a=[t,n],o=2,i=[];o--;)i[o]=r[o]?parseInt(a[o],10):i[o]=!0===a[o]?1:e(a[o]);return i}function m(t,n,e,r){for(var a=2,o=[];a--;)o[a]=n[a]?e[a]*(r[a]-t[a]):t[a]?e[a]*(1-t[a]):0;return o}function d(t,n){for(var e=2;e--;)t[e];return[]}function h(t,n,e,r,a){for(var o=t.offsetParent(),i=t.position(),s=[],l=[],u=2;u--;)s[u]=e[u]?0:i[0===u?"left":"top"]/(o[0===u?"outerWidth":"outerHeight"]()-a[u]),l[u]=(s[u]-r[u])/n[u];return l}function v(t,n,e,r,a,o){for(var i,s=[],l=2,u={};l--;)t[l]&&(s[l]=t[l]*o[l]+e[l],i=n[l]?-1*s[l]:s[l]*r[l]*-1,0===l?(u.left=void 0,u.marginLeft=i):(u.top=void 0,u.marginTop=i));return u}function x(t,n,e,r,a,o,i){var s,l;if((!a[0]||Math.abs(t[0]-n[0])<e[0])&&(!a[1]||Math.abs(t[1]-n[1])<e[1]))return o&&o(),i(t);for(s=[],l=2;l--;)a[l]&&(s[l]=t[l]+r*(n[l]-t[l]));return i(s)}function g(t,n,e,r,a,o,i){if(t[0]!==n[0]||t[1]!==n[1])return i(t)}function w(t,n,e){t.off(n).removeData("parallax_port"),q.off(e)}function y(t,n,e){n.elem.off(e),n.layers=n.layers.not(t),0===n.layers.length&&w(n.elem,n.events,n.winEvents)}function b(t){var n={};t[0]&&(n.left="",n.marginLeft=""),t[1]&&(n.top="",n.marginTop=""),elem.css(n)}var k={left:0,top:0,middle:.5,center:.5,right:1,bottom:1},F=/^\d+\s?px$/,T=/^\d+\s?%$/,q=t(window),A=t(document),I=[100,100],L=function(){function t(){function t(){}function r(){var t=s.slice(0),r=t.length,a=-1;for(n&&console.log("timer frame()",r);++a<r;)t[a].call(this);e(i)}function a(){n&&console.log("timer start()"),this.start=t,this.stop=o,e(i=r)}function o(){n&&console.log("timer stop()"),this.start=a,this.stop=t,i=t}var i,s=[];this.callbacks=s,this.start=a,this.stop=o}var n=!1,e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,n){return window.setTimeout(function(){t()},25)};return t.prototype={add:function(t){for(var e=this.callbacks,r=e.length;r--;)if(e[r]===t)return;this.callbacks.push(t),n&&console.log("timer add()",this.callbacks.length)},remove:function(t){for(var e=this.callbacks,r=e.length;r--;)e[r]===t&&e.splice(r,1);n&&console.log("timer remove()",this.callbacks.length),0===e.length&&this.stop()}},t}();t.fn.parallax=function(n){var e=t.extend({},t.fn.parallax.options,n),o=arguments,i=a(e.mouseport instanceof t?e.mouseport:t(e.mouseport),"parallax_port",r),s=i.timer;return this.each(function(n){function r(t){var n=v(I,A,L,T,z,t);b.css(n),R=t}function a(){W(i.pointer,R,i.threshold,F,I,D,r)}function l(){W=g}function w(){s.remove(a)}var y=this,b=t(this),k=o[n+1]?t.extend({},e,o[n+1]):e,F=k.decay,T=u(b,k.width,k.height),q=f(k.xorigin,k.yorigin),A=c(k.xparallax,k.yparallax),I=p(k.xparallax,k.yparallax,A),L=m(I,A,q,T),z=d(A),R=h(b,I,A,L,T),W=x,D=l,E={"mouseenter.parallax":function(t){W=x,D=l,s.add(a),s.start()},"mouseleave.parallax":function(t){W=x,D=w}};t.data(y,"parallax")&&b.unparallax(),t.data(y,"parallax",{port:i,events:E,parallax:I}),i.elem.on(E),i.layers=i.layers?i.layers.add(y):t(y)})},t.fn.unparallax=function(n){return this.each(function(){var e=t.data(this,"parallax");e&&(t.removeData(this,"parallax"),y(this,e.port,e.events),n&&b(e.parallax))})},t.fn.parallax.options={mouseport:"body",xparallax:!0,yparallax:!0,xorigin:0,yorigin:0,decay:.9,frameDuration:30,freezeClass:"freeze"},A.on("mousemove.parallax",function(t){I=[t.pageX,t.pageY]})}(jQuery);